create_narrative_task:
  description: >
    Analise o resumo dos dados abaixo:
    {data_summary}

    Escreva um texto curto de 2 parágrafos com insights de negócio sobre esses dados.
    Seja direto.
  expected_output: >
    Texto em Markdown.

develop_code_task:
  description: >
    Gere o código Python para o dashboard interativo.
    
    Entrada: '{file_path}'
    Estrutura: {data_summary}
    Narrativa: Contexto da tarefa anterior.
    
    REGRAS DE INTERATIVIDADE (OBRIGATÓRIO):
    1. Identifique colunas categóricas (ex: Região, Vendedor, Categoria, Mês).
    2. Crie filtros usando 'st.multiselect' ou 'st.selectbox'. Organize-os usando 'st.columns'.
    3. Crie um novo dataframe filtrado (ex: df_filtered) aplicando as seleções do usuário.
    4. Use esse 'df_filtered' para gerar os gráficos Altair.
    
    REGRAS DE FORMATAÇÃO DE SAÍDA:
    Retorne UMA única string:
    [Narrativa]
    |||SEP|||
    [Código Python]
    
    Regras do Código:
    - Use 'pd.read_csv(r"{file_path}")'.
    - NÃO use 'st.set_page_config'.
    - NÃO use '@st.cache'.
    - O código deve tratar o caso de filtro vazio (se nada selecionado, mostre tudo).
  expected_output: >
    Texto contendo Narrativa |||SEP||| Código Python com Filtros.